# Zetta Lab — План разработки

## Матрица функций конкурентов

| Функция | IceBerg (500к) | Аверсофт (16к) | Doping CRM (990-3490/мес) | ztlsoft (1200-4800) | CSW-soft (5к/мес) | IDENT (22.9к/мес) | Адента (26-34к) | **Zetta Lab** |
|---------|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
| Заказ-наряды | + | + | + | + | + | + | + | **+** |
| Этапы производства | + | - | частично | - | + | + | + | **+ (реалтайм)** |
| Финансы (доход/расход) | + | + | + | + | + | + | + (модуль 87к) | **+** |
| Учёт материалов | + (40 видов/позиция) | + | ожидание | + | + (3к/мес доп.) | + (автосписание) | + | **+ (авто)** |
| ЗП техникам | + | + | + (с 1990/мес) | + | + | + | + | **+** |
| Выставление счетов | + | + | зависит от тарифа | + | + | + | + | **+** |
| Контроль этапов | + | подсветка сроков | 3 даты | - | + | + | + | **+ (канбан + таймлайн)** |
| Анализ заказчиков | + | + | + | - | + | + | + | **+ (AI)** |
| Мобильное | отдельное 35к | в сетевой | только CRM | нет | нет | + | нет | **+ (PWA)** |
| Выгрузка 1С | + | Excel | нет | нет | одной суммой | + | + (ЕГИСЗ) | **+ (детально)** |
| Прогноз сроков | + (от базовых) | подсветка | 3 даты | нет | + | нет | нет | **+ (AI)** |
| Портал заказчика | нет | нет | нет | + (через прайс) | нет | нет | нет | **+** |
| Telegram-уведомления | нет | нет | + | нет | нет | нет | нет | **+** |
| Облако (SaaS) | нет | нет | + | нет | + | частично | нет | **+** |
| API/интеграции | нет | нет | amoCRM/Битрикс | iStom | 1С | нет | нет | **REST API** |
| Мультитенантность | нет | нет | нет | нет | нет | нет | нет | **+** |
| Фото-хранилище | нет | нет | нет | нет | нет | нет | нет | **+ (S3)** |
| Курьерская логистика | нет | нет | нет | нет | нет | нет | нет | **+** |

---

## Наши ключевые отличия от ВСЕХ конкурентов

1. **Полностью облачный SaaS** — не нужен IT-отдел, работает с любого устройства
2. **Мультитенантность** — одна платформа, много лабораторий (масштабирование бизнеса)
3. **Портал для клиник** — стоматологии сами создают заказы и отслеживают статус
4. **Встроенное фото-хранилище** — замена Яндекс.Диска, фото привязаны к нарядам
5. **Курьерская логистика** — маршруты, отслеживание, подтверждение забора/доставки
6. **Реалтайм канбан-доска** — визуальный контроль этапов как в Trello, но для ЗТЛ
7. **Telegram-бот** — уведомления, быстрые действия, фото прямо в наряд
8. **PWA мобильное приложение** — работает офлайн, push-уведомления
9. **AI-прогнозирование** — сроки на основе истории, загрузка техников
10. **Детальная выгрузка в 1С** — по каждой позиции, не одной суммой

---

## Архитектура модулей

### Модуль 1: Ядро (Core)
- Мультитенантная авторизация (организация -> пользователи -> роли)
- RBAC: Владелец, Админ, Ст.техник, Техник, Гипсовщик, CAD-специалист, Курьер, Бухгалтер
- Настройки организации, рабочие часы, тайм-зона

### Модуль 2: Справочники (Directories)
- Каталог работ (с нумерацией 1.x.x - 6.x.x)
- Прайс-листы (общий + индивидуальный по клинике)
- Справочник материалов (с нормами расхода на единицу)
- Справочник имплантационных систем
- Цветовые шкалы (Vita, A1-D4)

### Модуль 3: Заказчики и врачи (CRM)
- Клиники-заказчики (контакты, договоры, индивидуальные прайсы)
- Врачи (привязка к клиникам)
- Пациенты
- История заказов, баланс, аналитика прибыльности

### Модуль 4: Заказ-наряды (Orders) — ГЛАВНЫЙ
- Создание наряда (заказчик, врач, пациент, список работ)
- Зубная формула (интерактивная визуализация)
- Этапы производства (настраиваемый пайплайн)
- Назначение техников на этапы
- Отслеживание дат (принято, каркас, примерка, сдача)
- Фото-вложения к наряду
- Комментарии и история изменений
- Статусы: Новый -> В работе -> На примерке -> Доработка -> Сборка -> Готов -> Сдан
- Связанные работы (доп. работы, коррекции)

### Модуль 5: Производство (Production)
- Канбан-доска по этапам (гипсовка -> моделирование -> каркас -> керамика -> сборка)
- Загрузка техников (визуальная шкала)
- Прогнозирование сроков
- Контроль просрочек (автоуведомления)

### Модуль 6: Склад (Warehouse)
- Приход/расход материалов
- Автоматическое списание по нормам при завершении наряда
- Минимальные остатки (предупреждения)
- Инвентаризация
- История движения

### Модуль 7: Финансы (Finance)
- Выставление счетов клиникам
- Акты выполненных работ
- Учёт оплат (нал/безнал)
- Расходы лаборатории (постоянные/переменные)
- Баланс по заказчикам
- P&L отчёт

### Модуль 8: Зарплата (Salary)
- Расчёт ЗП по выполненным работам
- Процент/фиксированная ставка за вид работы
- Ведомость за период
- История начислений техника

### Модуль 9: Логистика (Logistics)
- Маршруты курьеров
- Отслеживание забора/доставки
- Сверка курьеров

### Модуль 10: Отчёты (Reports)
- По заказчикам (объём, прибыльность, просрочки)
- По техникам (выработка, качество, ЗП)
- По финансам (P&L, баланс, дебиторка)
- По складу (остатки, расход, прогноз закупок)
- Выгрузка в Excel/PDF
- Интеграция 1С

### Модуль 11: Портал заказчика (Client Portal)
- Отдельный вход для клиник
- Создание заказа по прайсу
- Отслеживание статуса
- История заказов, документы, баланс
- Чат с лабораторией

### Модуль 12: Уведомления (Notifications)
- В приложении (push)
- Telegram-бот
- Email
- Триггеры: просрочка, смена статуса, новый заказ, нехватка материала

---

## Фазы разработки

### ФАЗА 1 — MVP (ядро + наряды)
**Цель:** Заменить основную Excel-таблицу

- [x] Инфраструктура (Docker, PostgreSQL, Redis)
- [ ] Auth + RBAC
- [ ] Справочник работ (каталог с нумерацией)
- [ ] CRUD заказчиков (клиник)
- [ ] CRUD врачей / пациентов
- [ ] Заказ-наряды (создание, редактирование, список)
- [ ] Этапы производства (статусы, даты, назначение техника)
- [ ] Канбан-доска нарядов
- [ ] Базовый фильтр/поиск
- [ ] Frontend: Dashboard, таблица нарядов, форма создания

### ФАЗА 2 — Операции
**Цель:** Заменить остальные вкладки Excel

- [ ] Склад и материалы
- [ ] Расчёт ЗП техникам
- [ ] Финансы (счета, акты, платежи)
- [ ] Расходы и бюджет
- [ ] Логистика курьеров
- [ ] Загрузка фото к нарядам

### ФАЗА 3 — Продвинутое
**Цель:** Превзойти конкурентов

- [ ] Портал для клиник (отдельный вход)
- [ ] Telegram-бот
- [ ] PWA мобильная версия
- [ ] Отчёты и аналитика
- [ ] Выгрузка в 1С
- [ ] Прогнозирование сроков (AI)

### ФАЗА 4 — Масштабирование
**Цель:** Продукт для продажи

- [ ] Мультитенантность (регистрация новых лабораторий)
- [ ] Подписочная система (тарифы, биллинг)
- [ ] Онбординг новых клиентов
- [ ] Документация / Help Center
- [ ] Импорт из Excel (миграция данных)

---

## Схема базы данных (ключевые сущности)

```
Organization (мультитенантность)
├── User (роли: owner, admin, senior_tech, technician, courier, accountant)
├── Client (клиники-заказчики)
│   ├── Doctor (врачи клиники)
│   ├── ClientPriceList (индивидуальный прайс)
│   └── ClientBalance (баланс)
├── WorkCatalog (каталог работ 1.x.x - 6.x.x)
│   ├── WorkCategory (группы: цифровые, несъёмные, имплантология...)
│   └── MaterialNorm (нормы расхода материалов)
├── Order (заказ-наряд — ГЛАВНАЯ СУЩНОСТЬ)
│   ├── OrderItem (позиции: какие работы заказаны)
│   ├── OrderStage (этапы: гипсовка, моделирование, каркас...)
│   ├── OrderPhoto (фото к наряду)
│   ├── OrderComment (комментарии)
│   └── OrderHistory (история изменений)
├── Material (справочник материалов)
│   ├── MaterialMovement (приход/расход)
│   └── MaterialStock (текущие остатки)
├── Payment (платежи от клиник)
├── Invoice (счета)
├── Act (акты выполненных работ)
├── Expense (расходы лаборатории)
├── SalaryRecord (начисления ЗП)
├── CourierRoute (маршруты курьеров)
└── Notification (уведомления)
```

---

## Ценообразование (ориентир по рынку)

| Конкурент | Модель | Цена |
|-----------|--------|------|
| Doping CRM | облако, подписка | 990-3490/мес |
| CSW-soft | веб, подписка | 5000/мес |
| IDENT | подписка | 17 900-22 900/мес |
| IceBerg | разово | от 500 000 |

**Наше предложение (предварительно):**
| Тариф | Пользователи | Цена/мес |
|-------|-------------|----------|
| Старт | до 3 | 2 990 руб |
| Бизнес | до 10 | 5 990 руб |
| Про | до 25 | 9 990 руб |
| Корпоративный | безлимит | 14 990 руб |

+ Портал для клиник: +2 000 руб/мес
+ Telegram-бот: включён с тарифа "Бизнес"
+ Хранилище фото: 5 ГБ бесплатно, далее 500 руб/10 ГБ
